import { parseXMLToQueuePlace } from "./parse-xml-to-queue-place";

describe('Parse XML Queue Access', () => {
  it('should handle response body', () => {
    const bodyPayload = '<QueuePlaceRS xmlns="http://webservices.sabre.com/sabreXML/2011/10" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:stl="http://services.sabre.com/STL/v01" Version="2.0.4"><stl:ApplicationResults status="Complete"><stl:Success timeStamp="2025-02-18T17:46:56Z"><stl:SystemSpecificResults><stl:HostCommand LNIATA="52D656">QP/H8GI100/11</stl:HostCommand></stl:SystemSpecificResults></stl:Success></stl:ApplicationResults><Text>011  SEE REMARKS</Text><Text>1.1ALONSO VEGA/FERNANDO  2.1SALUM RODRIGUEZ/ANA ISABEL</Text><Text>TKT/TIME LIMIT</Text><Text>1.T-02JAN-8AYC*ATS</Text><Text>PHONES</Text><Text>1.MEX871 178 6111</Text><Text>PASSENGER EMAIL DATA EXISTS  *PE TO DISPLAY ALL</Text><Text>CUSTOMER NUMBER - 421029</Text><Text>INVOICED</Text><Text>PRICE QUOTE RECORD EXISTS - SYSTEM/MANUAL</Text><Text>SECURITY INFO EXISTS *P3D OR *P4D TO DISPLAY</Text><Text>AA FACTS</Text><Text>1.SSR ADTK 1S KK01 AA WILL CANCEL IF NO TKT BY 2359 05JUN CST</Text><Text>2.OSI 1S *** PREV TIME FOR AA4005O 28JAN TRCDFW  644A  844A</Text><Text>3.OSI 1S *** PREV TIME FOR AA 420O 28JAN DFWDEN 1219P  131P</Text><Text>4.OSI 1S *** PREV TIME FOR AA2359O 06FEB DENDFW 1254P  355P</Text><Text>5.OSI 1S *** PREV TIME FOR AA4004O 06FEB DFWTRC  636P  831P</Text><Text>6.OSI 1S *** PREV TIME FOR AA4005O 28JAN TRCDFW  613A  808A</Text><Text>7.OSI 1S *** PREV TIME FOR AA4004O 06FEB DFWTRC  840P 1050P</Text><Text>8.OSI 1S *** PREV TIME FOR AA 420O 28JAN DFWDEN 1241P  156P</Text><Text>9.OSI 1S *** PREV TIME FOR AA2359O 06FEB DENDFW 1235P  334P</Text><Text>GENERAL FACTS</Text><Text>7.SSR OTHS 1S ATTN AGY TKT REVALIDATED PER SCHD CHNG 30SEP24</Text><Text>8.SSR OTHS 1S ATTN AGY TKT REVALIDATED PER SCHD CHNG 28OCT24</Text><Text>9.SSR OTHS 1S ATTN AGY TKT REVALIDATED PER SCHD CHNG 11NOV24</Text><Text>REMARKS</Text><Text>1..AC06PATY GALES</Text><Text>2..MP-PUE</Text><Text>3..UCFDI-S01</Text><Text>4..REGFISREC-616</Text><Text>5.H-AUTH-AMEX/AX6012/05JUN/01521717625460153238</Text><Text>6.H-  AUTH-APV/140480/000/MXN12890</Text><Text>7.H-  AUTH-CSC NOT SUPPLIED/</Text><Text>8.H-  AUTH-AVS NOT SUPPORTED/</Text><Text>9.XXTAW/</Text><Text>10..CS01-CXSAX-517.24-6012</Text><Text>11.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN</Text><Text>12.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN</Text><Text>13.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN</Text><Text>14.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN</Text><Text>15.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN</Text><Text>16.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN</Text><Text>17.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN</Text><Text>18.H-AUTH-AMEX/AX6012/02JAN/01301735856535295564</Text><Text>19.H-  AUTH-APV/184822/000/MXN53</Text><Text>20.H-  AUTH-CSC NOT SUPPLIED/</Text><Text>21.H-  AUTH-AVS NOT SUPPORTED/</Text><Text>23.H-AEBT/0013489329919/8AYC*ATS/8AYC*ATS</Text><Text>24.H-AUTH-AMEX/AX6012/02JAN/01131735856729229551</Text><Text>25.H-  AUTH-APV/119708/000/MXN53</Text><Text>26.H-  AUTH-CSC NOT SUPPLIED/</Text><Text>27.H-  AUTH-AVS NOT SUPPORTED/</Text><Text>29.H-AEBT/0013489329920/8AYC*ATS/8AYC*ATS</Text><Text>30..AG-29</Text><Text>31.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN</Text><Text>32.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN</Text><Text>ACCOUNTING DATA</Text><Text>1.  AA3709124848/     37/       3744/   1516/D150/D1035/ONE/</Text><Text>CCAX376666929056012 1.1ALONSO VEGA FERNANDO/1/F/E</Text><Text>2.  AA3709124849/     37/       3744/   1516/D150/D1035/ONE/</Text><Text>CCAX376666929056012 2.1SALUM RODRIGUEZ ANA ISABEL/1/F/E</Text><Text>3.  AA3489329919/      0/          0/     47/D6/D0/ONE/CCAX3</Text><Text>76666929056012 1.1ALONSO VEGA FERNANDO/1/F/E-00137091248</Text><Text>48/1234</Text><Text>4.  AA3489329920/      0/          0/     47/D6/D0/ONE/CCAX3</Text><Text>76666929056012 2.1SALUM RODRIGUEZ ANA I/1/F/E-0013709124</Text><Text>849/1234</Text><Text>RECEIVED FROM - PATYGALES</Text><Text>8AYC.8AYC*AEH 1829/04JUN24 FXIDVU H</Text></QueuePlaceRS>'
    const response = parseXMLToQueuePlace(bodyPayload);
    // console.dir(response, { depth: null })
    expect(response).toEqual({
      applicationResults: {
        success: {
          systemSpecificResults: { hostCommand: { content: 'QP/H8GI100/11', lNIATA: '52D656' } },
          timeStamp: '2025-02-18T17:46:56Z'
        },
        status: 'Complete'
      },
      text: [
        '011  SEE REMARKS',
        '1.1ALONSO VEGA/FERNANDO  2.1SALUM RODRIGUEZ/ANA ISABEL',
        'TKT/TIME LIMIT',
        '1.T-02JAN-8AYC*ATS',
        'PHONES',
        '1.MEX871 178 6111',
        'PASSENGER EMAIL DATA EXISTS  *PE TO DISPLAY ALL',
        'CUSTOMER NUMBER - 421029',
        'INVOICED',
        'PRICE QUOTE RECORD EXISTS - SYSTEM/MANUAL',
        'SECURITY INFO EXISTS *P3D OR *P4D TO DISPLAY',
        'AA FACTS',
        '1.SSR ADTK 1S KK01 AA WILL CANCEL IF NO TKT BY 2359 05JUN CST',
        '2.OSI 1S *** PREV TIME FOR AA4005O 28JAN TRCDFW  644A  844A',
        '3.OSI 1S *** PREV TIME FOR AA 420O 28JAN DFWDEN 1219P  131P',
        '4.OSI 1S *** PREV TIME FOR AA2359O 06FEB DENDFW 1254P  355P',
        '5.OSI 1S *** PREV TIME FOR AA4004O 06FEB DFWTRC  636P  831P',
        '6.OSI 1S *** PREV TIME FOR AA4005O 28JAN TRCDFW  613A  808A',
        '7.OSI 1S *** PREV TIME FOR AA4004O 06FEB DFWTRC  840P 1050P',
        '8.OSI 1S *** PREV TIME FOR AA 420O 28JAN DFWDEN 1241P  156P',
        '9.OSI 1S *** PREV TIME FOR AA2359O 06FEB DENDFW 1235P  334P',
        'GENERAL FACTS',
        '7.SSR OTHS 1S ATTN AGY TKT REVALIDATED PER SCHD CHNG 30SEP24',
        '8.SSR OTHS 1S ATTN AGY TKT REVALIDATED PER SCHD CHNG 28OCT24',
        '9.SSR OTHS 1S ATTN AGY TKT REVALIDATED PER SCHD CHNG 11NOV24',
        'REMARKS',
        '1..AC06PATY GALES',
        '2..MP-PUE',
        '3..UCFDI-S01',
        '4..REGFISREC-616',
        '5.H-AUTH-AMEX/AX6012/05JUN/01521717625460153238',
        '6.H-  AUTH-APV/140480/000/MXN12890',
        '7.H-  AUTH-CSC NOT SUPPLIED/',
        '8.H-  AUTH-AVS NOT SUPPORTED/',
        '9.XXTAW/',
        '10..CS01-CXSAX-517.24-6012',
        '11.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN',
        '12.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN',
        '13.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN',
        '14.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN',
        '15.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN',
        '16.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN',
        '17.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN',
        '18.H-AUTH-AMEX/AX6012/02JAN/01301735856535295564',
        '19.H-  AUTH-APV/184822/000/MXN53',
        '20.H-  AUTH-CSC NOT SUPPLIED/',
        '21.H-  AUTH-AVS NOT SUPPORTED/',
        '23.H-AEBT/0013489329919/8AYC*ATS/8AYC*ATS',
        '24.H-AUTH-AMEX/AX6012/02JAN/01131735856729229551',
        '25.H-  AUTH-APV/119708/000/MXN53',
        '26.H-  AUTH-CSC NOT SUPPLIED/',
        '27.H-  AUTH-AVS NOT SUPPORTED/',
        '29.H-AEBT/0013489329920/8AYC*ATS/8AYC*ATS',
        '30..AG-29',
        '31.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN',
        '32.H-POSSIBLE DUPE BOOKING. SEE PNR JCNCRN',
        'ACCOUNTING DATA',
        '1.  AA\x873709124848/     37/       3744/   1516/D150/D1035/ONE/',
        'CCAX376666929056012 1.1ALONSO VEGA FERNANDO/1/F/E',
        '2.  AA\x873709124849/     37/       3744/   1516/D150/D1035/ONE/',
        'CCAX376666929056012 2.1SALUM RODRIGUEZ ANA ISABEL/1/F/E',
        '3.  AA\x873489329919/      0/          0/     47/D6/D0/ONE/CCAX3',
        '76666929056012 1.1ALONSO VEGA FERNANDO/1/F/E-00137091248',
        '48/1234',
        '4.  AA\x873489329920/      0/          0/     47/D6/D0/ONE/CCAX3',
        '76666929056012 2.1SALUM RODRIGUEZ ANA I/1/F/E-0013709124',
        '849/1234',
        'RECEIVED FROM - PATYGALES',
        '8AYC.8AYC*AEH 1829/04JUN24 FXIDVU H'
      ]
    })
  });
});